{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\91600\\\\Documents\\\\zahidproject\\\\frontend\\\\src\\\\components\\\\ProductItem.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport { useCart } from \"../context/cart/CartState\";\nimport \"./ProductItem.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function ProductItem({\n  product\n}) {\n  _s();\n  var _cartItems$find;\n  const {\n    cartItems,\n    addToCart\n  } = useCart();\n\n  // 1️⃣ Guard against undefined product or empty variants\n  if (!product) return null;\n  const variants = product.variants || [];\n  if (!variants.length) return null;\n  const [selectedVariant, setSelectedVariant] = useState(variants[0]);\n  const [selectedSize, setSelectedSize] = useState(\"\");\n  const handleColorClick = variant => {\n    setSelectedVariant(variant);\n    setSelectedSize(\"\");\n  };\n  const handleSizeClick = size => {\n    setSelectedSize(size);\n  };\n  const handleAddToCart = () => {\n    if (!selectedVariant || !selectedSize) return;\n    const cartItem = {\n      productId: product._id,\n      color: selectedVariant.color,\n      size: selectedSize,\n      image: selectedVariant.images,\n      price: product.price\n    };\n    addToCart(cartItem, 1);\n  };\n  const variantSizeObj = selectedVariant === null || selectedVariant === void 0 ? void 0 : selectedVariant.sizes.find(s => s.size === selectedSize);\n  const inCartQty = ((_cartItems$find = cartItems.find(c => c.productId === product._id && c.color === selectedVariant.color && c.size === selectedSize)) === null || _cartItems$find === void 0 ? void 0 : _cartItems$find.quantity) || 0;\n  const availableQty = ((variantSizeObj === null || variantSizeObj === void 0 ? void 0 : variantSizeObj.quantity) || 0) - inCartQty;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"col-sm-6 col-md-4 col-lg-3\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card product-card h-100 border-0 shadow-sm\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"position-relative\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: (selectedVariant === null || selectedVariant === void 0 ? void 0 : selectedVariant.images) || \"\",\n          className: \"card-img-top product-img\",\n          alt: product.name,\n          style: {\n            opacity: product.isActive ? 1 : 0.5\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 11\n        }, this), selectedSize && availableQty <= 0 && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"badge bg-danger position-absolute top-50 start-50 translate-middle\",\n          children: \"Not Available\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card-body text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n          className: \"card-title\",\n          children: product.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"fw-bold\",\n          children: [\"\\u20B9\", product.price]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex justify-content-center mb-2\",\n          children: variants.map((v, i) => /*#__PURE__*/_jsxDEV(\"span\", {\n            className: `color-circle mx-1 ${selectedVariant.color === v.color ? \"selected\" : \"\"}`,\n            style: {\n              backgroundColor: v.color\n            },\n            onClick: () => handleColorClick(v)\n          }, i, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex justify-content-center gap-2 flex-wrap mb-2\",\n          children: selectedVariant === null || selectedVariant === void 0 ? void 0 : selectedVariant.sizes.map((s, i) => /*#__PURE__*/_jsxDEV(\"span\", {\n            className: `size-box ${selectedSize === s.size ? \"selected\" : \"\"} ${s.quantity === 0 ? \"out-of-stock\" : \"\"}`,\n            onClick: () => handleSizeClick(s.size),\n            style: {\n              cursor: \"pointer\"\n            },\n            children: s.size\n          }, i, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 11\n        }, this), selectedVariant && selectedSize && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"badge bg-secondary mt-2\",\n          children: [\"Available: \", availableQty > 0 ? availableQty : 0]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-dark w-100 mt-2\",\n          disabled: !selectedVariant || !selectedSize || availableQty <= 0,\n          onClick: handleAddToCart,\n          children: \"Add to Cart\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 5\n  }, this);\n}\n_s(ProductItem, \"YW/bXC46fRYV+0H367LgZW32vrc=\", false, function () {\n  return [useCart];\n});\n_c = ProductItem;\nvar _c;\n$RefreshReg$(_c, \"ProductItem\");","map":{"version":3,"names":["React","useState","useCart","jsxDEV","_jsxDEV","ProductItem","product","_s","_cartItems$find","cartItems","addToCart","variants","length","selectedVariant","setSelectedVariant","selectedSize","setSelectedSize","handleColorClick","variant","handleSizeClick","size","handleAddToCart","cartItem","productId","_id","color","image","images","price","variantSizeObj","sizes","find","s","inCartQty","c","quantity","availableQty","className","children","src","alt","name","style","opacity","isActive","fileName","_jsxFileName","lineNumber","columnNumber","map","v","i","backgroundColor","onClick","cursor","disabled","_c","$RefreshReg$"],"sources":["C:/Users/91600/Documents/zahidproject/frontend/src/components/ProductItem.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { useCart } from \"../context/cart/CartState\";\r\nimport \"./ProductItem.css\";\r\n\r\nexport default function ProductItem({ product }) {\r\n  const { cartItems, addToCart } = useCart();\r\n\r\n  // 1️⃣ Guard against undefined product or empty variants\r\n  if (!product) return null;\r\n  const variants = product.variants || [];\r\n  if (!variants.length) return null;\r\n\r\n  const [selectedVariant, setSelectedVariant] = useState(variants[0]);\r\n  const [selectedSize, setSelectedSize] = useState(\"\");\r\n\r\n  const handleColorClick = (variant) => {\r\n    setSelectedVariant(variant);\r\n    setSelectedSize(\"\");\r\n  };\r\n\r\n  const handleSizeClick = (size) => {\r\n    setSelectedSize(size);\r\n  };\r\n\r\n  const handleAddToCart = () => {\r\n    if (!selectedVariant || !selectedSize) return;\r\n\r\n    const cartItem = {\r\n      productId: product._id,\r\n      color: selectedVariant.color,\r\n      size: selectedSize,\r\n      image: selectedVariant.images,\r\n      price: product.price,\r\n    };\r\n\r\n    addToCart(cartItem, 1); \r\n  };\r\n\r\n  const variantSizeObj = selectedVariant?.sizes.find(s => s.size === selectedSize);\r\n  const inCartQty = cartItems.find(\r\n    c => c.productId === product._id &&\r\n         c.color === selectedVariant.color &&\r\n         c.size === selectedSize\r\n  )?.quantity || 0;\r\n\r\n  const availableQty = (variantSizeObj?.quantity || 0) - inCartQty;\r\n\r\n  return (\r\n    <div className=\"col-sm-6 col-md-4 col-lg-3\">\r\n      <div className=\"card product-card h-100 border-0 shadow-sm\">\r\n        <div className=\"position-relative\">\r\n          <img\r\n            src={selectedVariant?.images || \"\"}\r\n            className=\"card-img-top product-img\"\r\n            alt={product.name}\r\n            style={{ opacity: product.isActive ? 1 : 0.5 }}\r\n          />\r\n          {selectedSize && availableQty <= 0 && (\r\n            <span className=\"badge bg-danger position-absolute top-50 start-50 translate-middle\">\r\n              Not Available\r\n            </span>\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"card-body text-center\">\r\n          <h5 className=\"card-title\">{product.name}</h5>\r\n          <p className=\"fw-bold\">₹{product.price}</p>\r\n\r\n          <div className=\"d-flex justify-content-center mb-2\">\r\n            {variants.map((v, i) => (\r\n              <span\r\n                key={i}\r\n                className={`color-circle mx-1 ${selectedVariant.color === v.color ? \"selected\" : \"\"}`}\r\n                style={{ backgroundColor: v.color }}\r\n                onClick={() => handleColorClick(v)}\r\n              />\r\n            ))}\r\n          </div>\r\n\r\n          <div className=\"d-flex justify-content-center gap-2 flex-wrap mb-2\">\r\n            {selectedVariant?.sizes.map((s, i) => (\r\n              <span\r\n                key={i}\r\n                className={`size-box ${selectedSize === s.size ? \"selected\" : \"\"} ${s.quantity === 0 ? \"out-of-stock\" : \"\"}`}\r\n                onClick={() => handleSizeClick(s.size)}\r\n                style={{ cursor: \"pointer\" }}\r\n              >\r\n                {s.size}\r\n              </span>\r\n            ))}\r\n          </div>\r\n\r\n          {selectedVariant && selectedSize && (\r\n            <span className=\"badge bg-secondary mt-2\">\r\n              Available: {availableQty > 0 ? availableQty : 0}\r\n            </span>\r\n          )}\r\n\r\n          <button\r\n            className=\"btn btn-dark w-100 mt-2\"\r\n            disabled={!selectedVariant || !selectedSize || availableQty <= 0}\r\n            onClick={handleAddToCart}\r\n          >\r\n            Add to Cart\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}