{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\91600\\\\Documents\\\\zahidproject\\\\frontend\\\\src\\\\context\\\\cart\\\\CartState.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useState, useEffect } from \"react\";\nimport CartContext from \"./CartContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const CartProvider = ({\n  children\n}) => {\n  _s();\n  const [cartItems, setCartItems] = useState([]);\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    fetchCart();\n  }, []);\n  const fetchCart = async () => {\n    try {\n      const res = await fetch(\"http://localhost:5000/api/cart/fetchcart\", {\n        headers: {\n          \"auth-token\": localStorage.getItem(\"token\")\n        }\n      });\n      const data = await res.json();\n      setCartItems(data.items || []);\n    } catch (err) {\n      console.error(err);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const addToCart = async (item, qty) => {\n    try {\n      const res = await fetch(\"http://localhost:5000/api/cart/addcart\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"auth-token\": localStorage.getItem(\"token\")\n        },\n        body: JSON.stringify({\n          ...item,\n          quantity: qty\n        })\n      });\n      const data = await res.json();\n      if (data.success) {\n        setCartItems(data.cart.items);\n      }\n    } catch (err) {\n      console.error(err);\n    }\n  };\n  const removeFromCart = async (item, qty) => {\n    try {\n      const res = await fetch(\"http://localhost:5000/api/cart/removecart\", {\n        method: \"DELETE\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"auth-token\": localStorage.getItem(\"token\")\n        },\n        body: JSON.stringify({\n          item\n        })\n      });\n      const data = await res.json();\n      if (data.success) {\n        setCartItems(data.cart.items);\n      }\n    } catch (err) {\n      console.error(err);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(CartContext.Provider, {\n    value: {\n      cartItems,\n      setCartItems,\n      loading,\n      addToCart,\n      removeFromCart\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 5\n  }, this);\n};\n_s(CartProvider, \"cilFcC1AIWylMAcpxsY9xFoPL/k=\");\n_c = CartProvider;\nexport const useCart = () => {\n  _s2();\n  return useContext(CartContext);\n};\n_s2(useCart, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nvar _c;\n$RefreshReg$(_c, \"CartProvider\");","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","CartContext","jsxDEV","_jsxDEV","CartProvider","children","_s","cartItems","setCartItems","loading","setLoading","fetchCart","res","fetch","headers","localStorage","getItem","data","json","items","err","console","error","addToCart","item","qty","method","body","JSON","stringify","quantity","success","cart","removeFromCart","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","useCart","_s2","$RefreshReg$"],"sources":["C:/Users/91600/Documents/zahidproject/frontend/src/context/cart/CartState.js"],"sourcesContent":["\r\nimport React, { createContext, useContext, useState, useEffect } from \"react\";\r\n\r\nimport CartContext from \"./CartContext\";\r\n\r\nexport const CartProvider = ({ children }) => {\r\n  const [cartItems, setCartItems] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n\r\n  useEffect(() => {\r\n    fetchCart();\r\n  }, []);\r\n\r\n  const fetchCart = async () => {\r\n    try {\r\n      const res = await fetch(\"http://localhost:5000/api/cart/fetchcart\", {\r\n        headers: { \"auth-token\": localStorage.getItem(\"token\") },\r\n      });\r\n      const data = await res.json();\r\n      setCartItems(data.items || []);\r\n    } catch (err) {\r\n      console.error(err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const addToCart = async (item, qty ) => {\r\n    try {\r\n      const res = await fetch(\"http://localhost:5000/api/cart/addcart\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          \"auth-token\": localStorage.getItem(\"token\"),\r\n        },\r\n        body: JSON.stringify({ ...item, quantity: qty }),\r\n      });\r\n      const data = await res.json();\r\n      if (data.success) {\r\n        setCartItems(data.cart.items); \r\n      }\r\n    } catch (err) {\r\n      console.error(err);\r\n    }\r\n  };\r\n const removeFromCart = async (item, qty ) => {\r\n    try {\r\n      const res = await fetch(\"http://localhost:5000/api/cart/removecart\", {\r\n        method: \"DELETE\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          \"auth-token\": localStorage.getItem(\"token\"),\r\n        },\r\n        body: JSON.stringify({ item}),\r\n      });\r\n      const data = await res.json();\r\n      if (data.success) {\r\n        setCartItems(data.cart.items); \r\n      }\r\n    } catch (err) {\r\n      console.error(err);\r\n    }\r\n  };\r\n \r\n  return (\r\n    <CartContext.Provider\r\n      value={{ cartItems, setCartItems, loading, addToCart,removeFromCart  }}\r\n    >\r\n      {children}\r\n    </CartContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useCart = () => useContext(CartContext);\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}